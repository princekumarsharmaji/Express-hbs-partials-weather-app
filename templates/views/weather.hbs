<!DOCTYPE html>
<html lang="en">
<head>
    {{>headerlinks}}
</head>
<body>
    {{>navbar}}
    <div class="container-fluid main_header">
        <div class = "row">
            <div class="col-md-10 col-12 mx-auto">
            
              <div class="main-content">
                  <form class="temp_form">
              <input type="text" id="cityName" placeholder="Enter Your City Name" autocomplete="off"/>
               <input type="submit" value="Search" id="submitBtn">
                  </form>
              </div>

              <div class="temp_info">
                  <div class="top_layer">
                      <p id = "day">Friday</p>
                      <p id="today_date">4 March</p>
                  </div>

                  <div class="main_layer">
                      <p id="city_name">Get output </p>
                      <div class="middle_layer">
                          <p id="temp"><span id = "temp-real_val">0</span><sup>o</sup>C</p>
                          <p id="temp_status"><i class="fa-solid fa-clouds" aria-hidden="true"></i></p>
                      </div>
                  </div>
                  </div>
                  
            
                </div>
                </div>
    </div>
    
  {{>footer}}
    <script>
        const cityName = document.getElementById('cityName');
        const submitBtn =   document.getElementById("submitBtn");
        const city_name = document.getElementById('city_name');
        const temp = document.getElementById('temp');
        const temp_status = document.getElementById('temp_status');

const getInfo =async (e) => {
     e.preventDefault();
      
       let cityVal = cityName.value;
    
    
    if(cityVal === ""){
       city_name.innerText = "Please type the place"
    }else{
        try{
       let url = `https://api.openweathermap.org/data/2.5/weather?q=${cityVal}&units=metric&appid=c5cf0e7e525d469055cb3fc602e34e95`;

         //let url = "f1e2f08ee3024080b1731508220603";
      const response = await fetch(url);
    console.log(response);
    const data = await response.json();
    console.log(data);
    const arrData = [data];
      temp.innerText = arrData[0].main.temp;
      temp_status.innerText = arrData[0].weather[0].main;
      city_name.innerText = `${arrData[0].name}, ${arrData[0].sys.country}`;

      {/*const tempMood = arrData[0].weather[0].main;

      if(tempMood === "Clouds"){temp_status.innerHTML =
          "<i class="fa-solid fa-snowflake"></i>"
      }else{
          
      }*/}

                   }catch(error){
            alert(error)
        }
     
    }

}

submitBtn.addEventListener('click',getInfo);
    </script>
</body>
</html>